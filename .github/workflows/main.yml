name: IP File Distribution

on:
  workflow_dispatch:  # Manual execution via GitHub interface
  schedule:
    - cron: '0 * * * *'  # Automatically triggered every hour

jobs:
  send-files:
    runs-on: ubuntu-latest

    steps:
    - name: Initialize Repository
      uses: actions/checkout@v2

    - name: Retrieve Required Files
      run: |
        curl -o export.json https://raw.githubusercontent.com/Json-Script/Collect_IPs/main/list/export.json
        curl -o ipv4.json https://raw.githubusercontent.com/Json-Script/Collect_IPs/main/list/ipv4.json
        curl -o ipv6.json https://raw.githubusercontent.com/Json-Script/Collect_IPs/main/list/ipv6.json
        curl -o full https://raw.githubusercontent.com/Json-Script/Collect_Keys/main/plus/full
        curl -o lite https://raw.githubusercontent.com/Json-Script/Collect_Keys/main/plus/lite

    - name: Transmit Files to Telegram
      run: |
        curl -X POST "https://api.telegram.org/bot${{ secrets.TELEGRAM_BOT_TOKEN }}/sendDocument" \
          -F chat_id="${{ secrets.TELEGRAM_CHAT_ID }}" \
          -F parse_mode="HTML" \
          -F document=@export.json \
          -F caption="<b>üìÇ Export Data File:</b> A meticulously compiled dataset encompassing all network information for advanced analytical processes and system management."

        curl -X POST "https://api.telegram.org/bot${{ secrets.TELEGRAM_BOT_TOKEN }}/sendDocument" \
          -F chat_id="${{ secrets.TELEGRAM_CHAT_ID }}" \
          -F parse_mode="HTML" \
          -F document=@ipv4.json \
          -F caption="<b>üåê IPv4 Address Registry:</b> A curated repository of IPv4 addresses, methodically organized to support targeted tracking and comprehensive data analysis."

        curl -X POST "https://api.telegram.org/bot${{ secrets.TELEGRAM_BOT_TOKEN }}/sendDocument" \
          -F chat_id="${{ secrets.TELEGRAM_CHAT_ID }}" \
          -F parse_mode="HTML" \
          -F document=@ipv6.json \
          -F caption="<b>üåç IPv6 Address Registry:</b> An extensive collection of IPv6 addresses, optimized for systematic tracking and strategic analytical requirements."

        curl -X POST "https://api.telegram.org/bot${{ secrets.TELEGRAM_BOT_TOKEN }}/sendDocument" \
          -F chat_id="${{ secrets.TELEGRAM_CHAT_ID }}" \
          -F parse_mode="HTML" \
          -F document=@full \
          -F caption="<b>üìã Comprehensive Full File:</b> A detailed data file supporting broad analytical applications and sophisticated data management operations."

        curl -X POST "https://api.telegram.org/bot${{ secrets.TELEGRAM_BOT_TOKEN }}/sendDocument" \
          -F chat_id="${{ secrets.TELEGRAM_CHAT_ID }}" \
          -F parse_mode="HTML" \
          -F document=@lite \
          -F caption="<b>üìë Streamlined Lite File:</b> A refined dataset crafted for efficient, focused analyses and lightweight data handling."