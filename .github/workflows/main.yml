name: IP File

on:
  workflow_dispatch:  # Trigger manually through GitHub's interface
  schedule:
    - cron: '0 * * * *'  # Scheduled for the start of every hour

jobs:
  send-files:
    runs-on: ubuntu-latest

    steps:
    - name: Retrieve Repository
      uses: actions/checkout@v2

    - name: Download Essential Files
      run: |
        curl -o export.json https://raw.githubusercontent.com/Json-Script/Collect_IPs/main/list/export.json
        curl -o ipv4.json https://raw.githubusercontent.com/Json-Script/Collect_IPs/main/list/ipv4.json
        curl -o ipv6.json https://raw.githubusercontent.com/Json-Script/Collect_IPs/main/list/ipv6.json
        curl -o full https://raw.githubusercontent.com/Json-Script/Collect_Keys/main/plus/full
        curl -o lite https://raw.githubusercontent.com/Json-Script/Collect_Keys/main/plus/lite

    - name: Gracefully Deliver Files to Telegram
      run: |
        curl -X POST "https://api.telegram.org/bot${{ secrets.TELEGRAM_BOT_TOKEN }}/sendDocument" \
          -F chat_id="${{ secrets.TELEGRAM_CHAT_ID }}" \
          -F document=@export.json \
          -F caption="üåê Export File: A comprehensive collection of data, invaluable for network insights and meticulous management."
        
        curl -X POST "https://api.telegram.org/bot${{ secrets.TELEGRAM_BOT_TOKEN }}/sendDocument" \
          -F chat_id="${{ secrets.TELEGRAM_CHAT_ID }}" \
          -F document=@ipv4.json \
          -F caption="üîç IPv4 Data: A curated list of IPv4 addresses, compiled for insightful tracking and precise analysis."
        
        curl -X POST "https://api.telegram.org/bot${{ secrets.TELEGRAM_BOT_TOKEN }}/sendDocument" \
          -F chat_id="${{ secrets.TELEGRAM_CHAT_ID }}" \
          -F document=@ipv6.json \
          -F caption="üîç IPv6 Data: A detailed list of IPv6 addresses, gathered for informed tracking and strategic analysis."

        curl -X POST "https://api.telegram.org/bot${{ secrets.TELEGRAM_BOT_TOKEN }}/sendDocument" \
          -F chat_id="${{ secrets.TELEGRAM_CHAT_ID }}" \
          -F document=@full \
          -F caption="üìú Full File: An expansive dataset for comprehensive analysis and data handling."
        
        curl -X POST "https://api.telegram.org/bot${{ secrets.TELEGRAM_BOT_TOKEN }}/sendDocument" \
          -F chat_id="${{ secrets.TELEGRAM_CHAT_ID }}" \
          -F document=@lite \
          -F caption="üìú Lite File: A refined file for focused analysis, streamlined for essential insights."